<!doctype html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/><title>European License Plate Hunt</title><style>:root{--panel:#11172e;--ink:#e8ecff;--ink-dim:#a8b1d8;--accent:#5dd3ff;--accent-2:#7affc7;--tile:#1a2346;--tile-hover:#243062;--tile-seen:#2b9159;--tile-outline:#3b4775;--eu-blue:#0A4B9C;--card-grad: radial-gradient(1000px 700px at 20% 0%, #1b1f3d 0%, #0c1229 40%, #0a0f22 100%)}html,body{height:100%}body{margin:0;background:radial-gradient(1200px 800px at 60% 20%,#0e1630 0%,#0b1020 40%,#080d1a 100%) fixed;color:var(--ink);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}header{position:sticky;top:0;z-index:30;display:flex;gap:.8rem;align-items:center;justify-content:space-between;padding:.75rem 1rem;background:linear-gradient(180deg,rgba(8,13,26,.95),rgba(8,13,26,.7) 60%,rgba(8,13,26,0));backdrop-filter:saturate(1.2) blur(6px);border-bottom:1px solid rgba(255,255,255,.06)}header h1{font-size:1rem;margin:.1rem 0}.sub{color:var(--ink-dim);font-size:.82rem}.bar{display:flex;gap:.5rem;align-items:center;flex-wrap:wrap}.pill,.btn{border:1px solid rgba(255,255,255,.12);background:var(--panel);color:var(--ink);border-radius:12px;padding:.5rem .8rem;font-size:.9rem;display:inline-flex;gap:.45rem;align-items:center}.btn{cursor:pointer;background:linear-gradient(180deg,#1a2241,#151d39);font-weight:700;letter-spacing:.2px}.btn:active{transform:translateY(1px) scale(.99)}main{height:calc(100dvh - 64px);display:grid;grid-template-columns:1fr 360px}@media (max-width:980px){main{grid-template-columns:1fr}aside{position:fixed;right:.75rem;bottom:.75rem;max-width:min(92vw,560px);border:1px solid rgba(255,255,255,.12);border-radius:14px;box-shadow:0 10px 40px rgba(0,0,0,.35);background:linear-gradient(180deg,#101833,#0c142b)}}#viewport{position:relative;overflow:hidden;touch-action:none;background:radial-gradient(1200px 800px at 60% 35%,rgba(56,123,255,.06) 0%,rgba(56,123,255,0) 55%),linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,0))}svg#map{width:100%;height:100%;display:block}.country{fill:var(--tile);stroke:var(--tile-outline);stroke-width:1.2;rx:10;ry:10;transition:fill .15s ease,stroke .15s ease}.hit{cursor:pointer}.group:hover .country{fill:var(--tile-hover)}.group.seen .country{fill:var(--tile-seen);stroke:#204b34}.label{font-size:12px;font-weight:800;pointer-events:none;fill:#e9efff;text-anchor:middle;dominant-baseline:middle;letter-spacing:.4px}aside{z-index:20;border-left:1px solid rgba(255,255,255,.1);background:linear-gradient(180deg,#101833,#0c142b);padding:.8rem;display:flex;flex-direction:column;gap:.7rem}.progress{height:8px;border-radius:999px;background:rgba(255,255,255,.08);overflow:hidden;outline:1px solid rgba(255,255,255,.08)}.progress>i{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--accent),var(--accent-2));transition:width .4s}.legend{display:flex;flex-wrap:wrap;gap:.4rem .5rem;align-items:center;font-size:.85rem;color:var(--ink-dim)}.swatch{width:1.2rem;height:.8rem;border-radius:3px;border:1px solid rgba(255,255,255,.2);display:inline-block;margin-right:.35rem}.swatch.yellow{background:#f3e167}.swatch.white{background:#f9f9f9}.list{max-height:38vh;overflow:auto;border-top:1px solid rgba(255,255,255,.08);padding-top:.5rem}.row{display:grid;grid-template-columns:1.2rem 1fr auto;gap:.6rem;align-items:center;padding:.35rem .2rem;border-radius:8px}.row:hover{background:rgba(255,255,255,.04)}.row .tick{width:1.1rem;height:1.1rem;border-radius:3px;border:1px solid rgba(255,255,255,.25);background:rgba(255,255,255,.06);display:inline-grid;place-items:center;font-size:.85rem}.row.seen .tick{background:#2b9159;border-color:#204b34}.row small{color:var(--ink-dim)}footer{position:fixed;left:0;right:0;bottom:0;padding:.4rem .8rem;text-align:center;color:var(--ink-dim);font-size:.8rem;background:linear-gradient(0deg,rgba(8,13,26,.85),rgba(8,13,26,0))}#wrapView{position:fixed;inset:0;z-index:60;display:none;align-items:center;justify-content:center;padding:1rem;background:linear-gradient(180deg,rgba(0,0,0,.55),rgba(0,0,0,.35))}.card{width:min(92vw,760px);border:1px solid rgba(255,255,255,.12);border-radius:16px;background:var(--card-grad);box-shadow:0 30px 80px rgba(0,0,0,.45);padding:1rem}.card .top{display:flex;align-items:center;justify-content:space-between;gap:.6rem}.card h2{margin:.2rem 0 .1rem;font-size:1.35rem}.muted{color:var(--ink-dim);font-size:.9rem}.big{font-size:3rem;font-weight:800;letter-spacing:.5px}.barL{height:12px;border-radius:999px;background:rgba(255,255,255,.1);overflow:hidden;outline:1px solid rgba(255,255,255,.08)}.barL>i{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--accent),var(--accent-2))}.wrap-badges{display:flex;flex-wrap:wrap;gap:.6rem;margin:.6rem 0 0}.wrap-badge{display:inline-flex;gap:.5rem;align-items:center;border:1px solid rgba(255,255,255,.16);padding:.5rem .7rem;border-radius:12px;background:linear-gradient(180deg,#1c2245,#151b36)}.wrap-actions{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.8rem}.chip{padding:.2rem .5rem;border-radius:999px;background:#1d2750;border:1px solid rgba(255,255,255,.12);font-size:.8rem}.cta{cursor:pointer;border:1px solid rgba(255,255,255,.16);border-radius:10px;padding:.55rem .8rem;font-weight:700;background:linear-gradient(180deg,#2a2f57,#1d2142)}.cta:active{transform:translateY(1px)}</style></head><body><header><div><h1>European License Plate Hunt</h1><div class=sub>Tap a country to toggle “seen”. Pinch to zoom, drag to pan. Progress saves to cookies.</div></div><div class=bar><span class=pill id=countPill>Seen: 0 / 0</span><span class=pill id=badgePill>Badges: 0</span><button class="btn" id=shareBtn>Share / Wrapped</button><button class=btn id=resetBtn>Reset</button></div></header><main><section id=viewport aria-label="Zoomable map"><svg id=map viewBox="0 0 1200 800" role="img" aria-labelledby="title desc"><title id=title>Tile map of Europe for license plate spotting</title><desc id=desc>Square tiles positioned roughly according to geography; each tile shows a country code label. Tap to toggle seen.</desc><g id=stage transform="translate(0,0) scale(1)"><rect x="-2000" y="-2000" width="5000" height="5000" fill="transparent"/>
<g class=group transform="translate(140,280)" data-id=IRL data-name="Ireland" data-code=IRL data-bg=white data-style=eu></g>
<g class=group transform="translate(220,260)" data-id=UK data-name="United Kingdom" data-code=UK data-bg=yellow data-style=plain></g>
<g class=group transform="translate(80,120)" data-id=IS data-name=Iceland data-code=IS data-bg=white data-style=flag data-flagcolors="#003399"></g>
<g class=group transform="translate(210,520)" data-id=P data-name=Portugal data-code=P data-bg=white data-style=eu></g>
<g class=group transform="translate(290,520)" data-id=E data-name=Spain data-code=E data-bg=white data-style=eu></g>
<g class=group transform="translate(360,460)" data-id=F data-name=France data-code=F data-bg=white data-style=eu></g>
<g class=group transform="translate(420,380)" data-id=B data-name=Belgium data-code=B data-bg=white data-style=eu></g>
<g class=group transform="translate(430,340)" data-id=NL data-name=Netherlands data-code=NL data-bg=yellow data-style=eu></g>
<g class=group transform="translate(450,420)" data-id=L data-name=Luxembourg data-code=L data-bg=yellow data-style=eu></g>
<g class=group transform="translate(500,380)" data-id=D data-name=Germany data-code=D data-bg=white data-style=eu></g>
<g class=group transform="translate(520,290)" data-id=DK data-name=Denmark data-code=DK data-bg=white data-style=eu></g>
<g class=group transform="translate(510,200)" data-id=N data-name=Norway data-code=N data-bg=white data-style=flag data-flagcolors="#003399"></g>
<g class=group transform="translate(560,230)" data-id=S data-name=Sweden data-code=S data-bg=white data-style=eu></g>
<g class=group transform="translate(640,210)" data-id=FIN data-name=Finland data-code=FIN data-bg=white data-style=eu></g>
<g class=group transform="translate(660,270)" data-id=EST data-name=Estonia data-code=EST data-bg=white data-style=eu></g>
<g class=group transform="translate(650,310)" data-id=LV data-name=Latvia data-code=LV data-bg=white data-style=eu></g>
<g class=group transform="translate(630,350)" data-id=LT data-name=Lithuania data-code=LT data-bg=white data-style=eu></g>
<g class=group transform="translate(600,400)" data-id=PL data-name=Poland data-code=PL data-bg=white data-style=eu></g>
<g class=group transform="translate(560,420)" data-id=CZ data-name=Czechia data-code=CZ data-bg=white data-style=eu></g>
<g class=group transform="translate(590,450)" data-id=SK data-name=Slovakia data-code=SK data-bg=white data-style=eu></g>
<g class=group transform="translate(540,460)" data-id=A data-name=Austria data-code=A data-bg=white data-style=eu></g>
<g class=group transform="translate(500,480)" data-id=CH data-name=Switzerland data-code=CH data-bg=white data-style=plain></g>
<g class=group transform="translate(560,520)" data-id=I data-name=Italy data-code=I data-bg=white data-style=eu></g>
<g class=group transform="translate(570,495)" data-id=SLO data-name=Slovenia data-code=SLO data-bg=white data-style=eu></g>
<g class=group transform="translate(580,520)" data-id=HR data-name=Croatia data-code=HR data-bg=white data-style=eu></g>
<g class=group transform="translate(605,540)" data-id=BIH data-name="Bosnia &amp; Herzegovina" data-code=BIH data-bg=white data-style=flag data-flagcolors="#0A4B9C"></g>
<g class=group transform="translate(635,540)" data-id=SRB data-name=Serbia data-code=SRB data-bg=white data-style=flag data-flagcolors="#0A4B9C"></g>
<g class=group transform="translate(615,565)" data-id=MNE data-name=Montenegro data-code=MNE data-bg=white data-style=flag data-flagcolors="#C8102E,#F8D24E"></g>
<g class=group transform="translate(650,565)" data-id=NMK data-name="North Macedonia" data-code=NMK data-bg=white data-style=flag data-flagcolors="#D21034,#FFD100"></g>
<g class=group transform="translate(620,590)" data-id=AL data-name=Albania data-code=AL data-bg=white data-style=flag data-flagcolors="#E41E20"></g>
<g class=group transform="translate(680,600)" data-id=GR data-name=Greece data-code=GR data-bg=white data-style=eu></g>
<g class=group transform="translate(610,480)" data-id=H data-name=Hungary data-code=H data-bg=white data-style=eu></g>
<g class=group transform="translate(680,480)" data-id=RO data-name=Romania data-code=RO data-bg=white data-style=eu></g>
<g class=group transform="translate(700,520)" data-id=BG data-name=Bulgaria data-code=BG data-bg=white data-style=eu></g>
<g class=group transform="translate(770,610)" data-id=CY data-name=Cyprus data-code=CY data-bg=white data-style=eu></g>
<g class=group transform="translate(610,620)" data-id=M data-name=Malta data-code=M data-bg=white data-style=eu></g>
<g class=group transform="translate(330,500)" data-id=AND data-name=Andorra data-code=AND data-bg=white data-style=plain></g>
<g class=group transform="translate(400,510)" data-id=MC data-name=Monaco data-code=MC data-bg=white data-style=plain></g>
<g class=group transform="translate(590,505)" data-id=RSM data-name="San Marino" data-code=RSM data-bg=white data-style=plain></g>
<g class=group transform="translate(520,465)" data-id=FL data-name=Liechtenstein data-code=FL data-bg=white data-style=plain></g>
<g class=group transform="translate(545,535)" data-id=V data-name="Vatican City" data-code=V data-bg=white data-style=plain></g>
<g class=group transform="translate(680,380)" data-id=BY data-name=Belarus data-code=BY data-bg=white data-style=plain></g>
<g class=group transform="translate(750,420)" data-id=UA data-name=Ukraine data-code=UA data-bg=white data-style=flag data-flagcolors="#005BBB,#FFD500"></g>
<g class=group transform="translate(740,480)" data-id=MD data-name=Moldova data-code=MD data-bg=white data-style=flag data-flagcolors="#0A4B9C"></g>
<g class=group transform="translate(820,570)" data-id=TR data-name=Turkey data-code=TR data-bg=white data-style=eu></g>
<g class=group transform="translate(900,520)" data-id=GEO data-name=Georgia data-code=GE data-bg=white data-style=flag data-flagcolors="#0A4B9C"></g>
<g class=group transform="translate(940,520)" data-id=AM data-name=Armenia data-code=AM data-bg=white data-style=flag data-flagcolors="#D40000,#0039A6,#FF9E00"></g>
<g class=group transform="translate(970,500)" data-id=AZ data-name=Azerbaijan data-code=AZ data-bg=white data-style=flag data-flagcolors="#00B9E4,#ED2939,#00A65E"></g>
</g></svg></section><aside><div class=pill id=progressPill>0% complete</div><div class=progress aria-hidden=true><i id=bar></i></div><div class=pill>Achievements</div><div class=achv-grid id=achvGrid></div><div class=legend><span><span class="swatch white"></span>White plate</span><span><span class="swatch yellow"></span>Yellow plate</span><span class=hint>Detailed plate graphics are in the list only.</span></div><div class="pill hint">Toggle from this list</div><div class=list id=countryList aria-label="All countries"></div></aside></main><footer>Made with ❤️ — no external libraries. Your progress is stored in a cookie on this device.</footer><section id=wrapView aria-hidden=true><div class=card id=wrapCard><div class=top><div><div class=chip id=wrapDate></div><h2>Your Euro Plate Hunt — Wrapped</h2></div><button class=cta id=closeWrap>Back to map</button></div><div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-top:.6rem"><div><div class=muted>Progress</div><div class=big id=wrapBig>0%</div><div class=barL><i id=wrapBar></i></div><div class=muted id=wrapCounts style="margin-top:.25rem"></div><div class=muted style="margin-top:.6rem">EU 27</div><div class=barL><i id=wrapEUbar></i></div><div class=muted id=wrapEUcount style="margin-top:.25rem"></div></div><div><div class=muted>Badges earned</div><div class=wrap-badges id=wrapBadges></div></div></div><div class=wrap-actions><button class=cta id=copyShare>Copy share link</button><button class=cta id=loadIntoApp>Load this progress</button></div></div></section><script>
const svg=document.getElementById('map'),stage=document.getElementById('stage'),groups=Array.from(stage.querySelectorAll('g.group')),NS='http://www.w3.org/2000/svg';const mk=(t,a={})=>{const n=document.createElementNS(NS,t);for(const k in a)n.setAttribute(k,a[k]);return n};
function buildTile(g){g.innerHTML='';g.appendChild(mk('rect',{class:'country hit',x:-32,y:-24,width:64,height:48,rx:10,ry:10}));const lbl=mk('text',{class:'label',x:0,y:0});lbl.textContent=g.dataset.code||'';g.appendChild(lbl)}groups.forEach(buildTile);
const allCountries=groups.map(g=>({id:g.dataset.id,code:g.dataset.code,name:g.dataset.name,bg:(g.dataset.bg||'white').toLowerCase(),style:(g.dataset.style||'eu').toLowerCase(),flagcolors:(g.dataset.flagcolors||'')}));const TOTAL=allCountries.length;
const SETS={EU27:new Set(['A','B','BG','HR','CY','CZ','DK','EST','FIN','F','D','GR','H','IRL','I','LV','LT','L','M','NL','PL','P','RO','SK','SLO','E','S']),NORDICS:new Set(['IS','N','DK','S','FIN']),BENELUX:new Set(['B','NL','L']),IBERIA:new Set(['P','E','AND']),BALTICS:new Set(['EST','LV','LT']),BALKANS:new Set(['SLO','HR','BIH','SRB','MNE','NMK','AL','GR','BG','RO']),ALPINE:new Set(['CH','A','I','FL']),NONEU4:new Set(['CH','IS','UK','N']),CAUCASUS:new Set(['GEO','AM','AZ']),MEDISLANDS:new Set(['M','CY'])};
const ACHIEVEMENTS=[
{id:'starter',name:'Starter Pack',desc:'Spot 5 countries',emoji:'🎉',rule:{count:5}},
{id:'roadtrip',name:'Road Trip',desc:'Spot 10 countries',emoji:'🚗',rule:{count:10}},
{id:'globe',name:'Globetrotter',desc:'Spot 25 countries',emoji:'🌍',rule:{count:25}},
{id:'full',name:'Full House',desc:'Spot them all',emoji:'🏆',rule:{all:true}},
{id:'eu27',name:'EU 27',desc:'All EU member states',emoji:'🇪🇺',rule:{set:'EU27'}},
{id:'nordics',name:'Nordics',desc:'IS, NO, DK, SE, FI',emoji:'❄️',rule:{set:'NORDICS'}},
{id:'benelux',name:'Benelux',desc:'BE, NL, LU',emoji:'🧇',rule:{set:'BENELUX'}},
{id:'iberia',name:'Iberia',desc:'PT, ES, AND',emoji:'☀️',rule:{set:'IBERIA'}},
{id:'baltics',name:'Baltic Trio',desc:'EE, LV, LT',emoji:'🌊',rule:{set:'BALTICS'}},
{id:'balkans',name:'Balkan Explorer',desc:'SI, HR, BA, RS, ME, MK, AL, GR, BG, RO',emoji:'🧭',rule:{set:'BALKANS'}},
{id:'alpine',name:'Alpine Circle',desc:'CH, AT, IT, LI',emoji:'⛰️',rule:{set:'ALPINE'}},
{id:'noneu4',name:'Non‑EU Big Four',desc:'CH, IS, UK, NO',emoji:'🧳',rule:{set:'NONEU4'}},
{id:'caucasus',name:'Caucasus Trio',desc:'GE, AM, AZ',emoji:'🗺️',rule:{set:'CAUCASUS'}},
{id:'medislands',name:'Med Islands',desc:'MT, CY',emoji:'🏝️',rule:{set:'MEDISLANDS'}},
];
function evaluateAchievements(seen){const arr=[];for(const a of ACHIEVEMENTS){let earned=false,progress=0,goal=0;if(a.rule.count){goal=a.rule.count;progress=Math.min(seen.size,goal);earned=seen.size>=goal}else if(a.rule.all){goal=TOTAL;progress=Math.min(seen.size,TOTAL);earned=seen.size===TOTAL}else if(a.rule.set){const s=SETS[a.rule.set];goal=s.size;progress=0;for(const id of s){if(seen.has(id))progress++}earned=progress===goal}arr.push({...a,earned,progress,goal})}return arr}
const COOKIE='eu-plates-progress';function setCookie(n,v,d){const t=new Date();t.setTime(t.getTime()+d*864e5);document.cookie=`${n}=${encodeURIComponent(v)}; expires=${t.toUTCString()}; path=/; SameSite=Lax`}function getCookie(n){const k=n+'=';const hit=document.cookie.split(';').map(c=>c.trim()).find(c=>c.startsWith(k));return hit?decodeURIComponent(hit.slice(k.length)):''}
let seen=new Set();try{const raw=getCookie(COOKIE);if(raw)JSON.parse(raw).forEach(id=>seen.add(id))}catch(e){}
function save(){setCookie(COOKIE,JSON.stringify([...seen]),3650)}function update(){groups.forEach(g=>g.classList.toggle('seen',seen.has(g.dataset.id)));document.querySelectorAll('.row').forEach(row=>{const id=row.dataset.id;row.classList.toggle('seen',seen.has(id));row.querySelector('.tick').textContent=seen.has(id)?'✓':''});const c=seen.size,pct=Math.round(c/TOTAL*100);document.getElementById('bar').style.width=pct+'%';document.getElementById('progressPill').textContent=pct+'% complete';document.getElementById('countPill').textContent=`Seen: ${c} / ${TOTAL}`;const ach=evaluateAchievements(seen);const earned=ach.filter(a=>a.earned);document.getElementById('badgePill').textContent=`Badges: ${earned.length}`;const grid=document.getElementById('achvGrid');grid.innerHTML='';earned.forEach(a=>{const el=document.createElement('div');el.className='badge';el.innerHTML=`<i>${a.emoji}</i><span>${a.name}</span>`;grid.appendChild(el)});if(earned.length===0){const el=document.createElement('div');el.className='hint';el.textContent='No badges yet — keep spotting!';grid.appendChild(el)}}function toggle(id){seen.has(id)?seen.delete(id):seen.add(id);save();update()}
let down=null;groups.forEach(g=>{g.addEventListener('pointerdown',e=>down={x:e.clientX,y:e.clientY});g.addEventListener('pointerup',e=>{if(!down)return;const moved=Math.hypot(e.clientX-down.x,e.clientY-down.y)>6;!moved&&toggle(g.dataset.id);down=null})});
const listEl=document.getElementById('countryList');(function(){const sorted=[...allCountries].sort((a,b)=>a.name.localeCompare(b.name));listEl.innerHTML='';for(const c of sorted){const row=document.createElement('div');row.className='row';row.dataset.id=c.id;row.innerHTML=`<span class="tick"></span><div><div>${c.name} <small class="ghost">(${c.code})</small></div><small>${c.bg==='yellow'?'Yellow plate':'White plate'} • ${c.style==='eu'?'EU band':(c.style==='flag'?'National band':'No band')}</small></div><div>${plate(c)}</div>`;row.addEventListener('click',()=>toggle(c.id));listEl.appendChild(row)}})();
function plate(c){const band=c.style!=='plain'?`<rect x="-38" y="-10" width="14" height="20" rx="2" ry="2" fill="${c.style==='eu'?'var(--eu-blue)':(c.flagcolors.split(',')[0]||'#003399')}"></rect>`:'';const stripes=c.style==='flag'?flagStripes(c):'';return `<svg width="80" height="22" viewBox="-40 -11 80 22"><rect x="-38" y="-10" width="76" height="20" rx="2.5" ry="2.5" fill="${c.bg==='yellow'?'#f3e167':'#f9f9f9'}" stroke="#cfd4e3" stroke-width="1"></rect>${stripes||band}<text x="${c.style==='plain'?'0':'-31'}" y="0" fill="${c.style==='plain'?'#111':'#fff'}" font-weight="800" font-size="10" text-anchor="middle" dominant-baseline="central">${c.code}</text></svg>`}
function flagStripes(c){const cols=c.flagcolors.split(',').map(s=>s.trim()).filter(Boolean);if(cols.length===0)return'';const h=20/cols.length;return cols.map((col,i)=>`<rect x="-38" y="${-10+i*h}" width="14" height="${h}" fill="${col}"></rect>`).join('') }
update();document.getElementById('resetBtn').addEventListener('click',()=>{if(confirm('Reset your progress on this device?')){seen.clear();save();update()}});
const wrap=document.getElementById('wrapView');document.getElementById('shareBtn').addEventListener('click',()=>{const url=buildShareURL(seen);copyToClipboard(url);window.location.href=url});document.getElementById('closeWrap').addEventListener('click',()=>{const base=window.location.pathname+window.location.hash.replace(/.*/,'');window.history.replaceState({},'',base);wrap.style.display='none';document.querySelector('header').style.display='';document.querySelector('main').style.display='';document.querySelector('footer').style.display=''});document.getElementById('copyShare').addEventListener('click',()=>{const url=window.location.href;copyToClipboard(url);alert('Share link copied to clipboard!')});document.getElementById('loadIntoApp').addEventListener('click',()=>{const d=getParamData();if(d&&Array.isArray(d.seen)){seen=new Set(d.seen);save();update();window.location.href=window.location.pathname}else{alert('No progress data found to load.')}});
function copyToClipboard(text){try{navigator.clipboard.writeText(text)}catch(e){const ta=document.createElement('textarea');ta.value=text;document.body.appendChild(ta);ta.select();try{document.execCommand('copy')}catch(e){}document.body.removeChild(ta)}}
function buildShareURL(seenSet){const data={seen:[...seenSet],ts:Date.now()};const json=JSON.stringify(data);const b64=btoa(json).replace(/\+/g,'-').replace(/\//g,'_').replace(/=+$/,'');const base=window.location.origin+window.location.pathname;return `${base}?wrap=1&d=${b64}`}
function getParamData(){const u=new URL(window.location.href);const d=u.searchParams.get('d');if(!d)return null;try{const b64=d.replace(/-/g,'+').replace(/_/g,'/');const json=atob(b64);return JSON.parse(json)}catch(e){return null}}
(function(){const u=new URL(window.location.href);if(u.searchParams.get('wrap')!=='1')return;const d=getParamData()||{seen:[...seen]};const linkSeen=new Set(Array.isArray(d.seen)?d.seen:[]);document.querySelector('header').style.display='none';document.querySelector('main').style.display='none';document.querySelector('footer').style.display='none';const count=linkSeen.size;const pct=Math.round(count/TOTAL*100);document.getElementById('wrapBig').textContent=pct+'%';document.getElementById('wrapBar').style.width=pct+'%';const dt=new Date(d.ts||Date.now());document.getElementById('wrapDate').textContent=dt.toLocaleDateString(undefined,{year:'numeric',month:'long',day:'numeric'});document.getElementById('wrapCounts').textContent=`${count} of ${TOTAL} countries`;const achEU=evaluateAchievements(linkSeen).find(a=>a.id==='eu27');const ePct=Math.round((achEU.progress/achEU.goal)*100);document.getElementById('wrapEUbar').style.width=ePct+'%';document.getElementById('wrapEUcount').textContent=`${achEU.progress} of ${achEU.goal} EU countries`;const wb=document.getElementById('wrapBadges');wb.innerHTML='';const earned=evaluateAchievements(linkSeen).filter(a=>a.earned);if(earned.length===0){const span=document.createElement('div');span.className='muted';span.textContent='No badges yet — share anyway!';wb.appendChild(span)}else{earned.forEach(a=>{const el=document.createElement('div');el.className='wrap-badge';el.innerHTML=`<span>${a.emoji}</span><strong>${a.name}</strong>`;wb.appendChild(el)})}wrap.style.display='flex'})();
(function(){const viewport=document.getElementById('viewport');let s=1,tx=0,ty=0,MIN=.7,MAX=3,last=null,touches=new Map();function apply(){stage.setAttribute('transform',`translate(${tx},${ty}) scale(${s})`)}function pt(x,y){const p=svg.createSVGPoint();p.x=x;p.y=y;return p.matrixTransform(svg.getScreenCTM().inverse())}apply();viewport.addEventListener('wheel',e=>{e.preventDefault();const k=e.deltaY>0?.9:1.1,ns=Math.min(MAX,Math.max(MIN,s*k)),p=pt(e.clientX,e.clientY);tx=p.x-(p.x-tx)*(ns/s);ty=p.y-(p.y-ty)*(ns/s);s=ns;apply()},{passive:false});viewport.addEventListener('pointerdown',e=>{viewport.setPointerCapture(e.pointerId);last={x:e.clientX,y:e.clientY}});viewport.addEventListener('pointermove',e=>{if(!last)return;tx+=(e.clientX-last.x)/s;ty+=(e.clientY-last.y)/s;last={x:e.clientX,y:e.clientY};apply()});['pointerup','pointercancel','pointerleave'].forEach(ev=>viewport.addEventListener(ev,()=>{last=null}));viewport.addEventListener('touchstart',e=>{for(const t of e.changedTouches)touches.set(t.identifier,{x:t.clientX,y:t.clientY})},{passive:true});viewport.addEventListener('touchmove',e=>{if(e.touches.length===1){const t=e.touches[0],p=touches.get(t.identifier)||{x:t.clientX,y:t.clientY};tx+=(t.clientX-p.x)/s;ty+=(t.clientY-p.y)/s;touches.set(t.identifier,{x:t.clientX,y:t.clientY});apply()}else if(e.touches.length>=2){const [t1,t2]=[e.touches[0],e.touches[1]],p1=touches.get(t1.identifier)||{x:t1.clientX,y:t1.clientY},p2=touches.get(t2.identifier)||{x:t2.clientX,y:t2.clientY},d0=Math.hypot(p2.x-p1.x,p2.y-p1.y),d1=Math.hypot(t2.clientX-t1.clientX,t2.clientY-t1.clientY);if(d0>0){const k=d1/d0,midX=(t1.clientX+t2.clientX)/2,midY=(t1.clientY+t2.clientY)/2,p=pt(midX,midY),ns=Math.min(MAX,Math.max(MIN,s*k));tx=p.x-(p.x-tx)*(ns/s);ty=p.y-(p.y-ty)*(ns/s);s=ns;apply()}touches.set(t1.identifier,{x:t1.clientX,y:t1.clientY});touches.set(t2.identifier,{x:t2.clientX,y:t2.clientY})}e.preventDefault()},{passive:false});viewport.addEventListener('touchend',e=>{for(const t of e.changedTouches)touches.delete(t.identifier)},{passive:true});viewport.addEventListener('touchcancel',e=>{for(const t of e.changedTouches)touches.delete(t.identifier)},{passive:true});})();</script></body></html>